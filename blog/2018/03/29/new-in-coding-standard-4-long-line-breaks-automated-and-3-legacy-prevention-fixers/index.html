<!DOCTYPE html>
<html lang="en">
    <head>
    <title>New in Coding Standard 4: Long Line Breaks Automated and 3 Legacy Prevention Fixers | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    
    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css" integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/brands.css" integrity="sha384-nT8r1Kzllf71iZl81CdFzObMsaLOhqBU1JD2+XoAALbdtWaXDOlWOZTR4v1ktjPE" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css" integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">

        <link href="/assets/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />

        <link href="/assets/css/style.css" rel="stylesheet" type="text/css" />


        <link href="/assets/css/checklist.css" rel="stylesheet" type="text/css" />
</head>
    <body>
                <!-- post_id: 87 -->

        
<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    <img src="https://avatars1.githubusercontent.com/u/924196?s=60&v=4" class="me_avatar">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li class="">
                    <a href="/php-framework-trends">Trends</a>
                </li>
                <li class="">
                    <a href="/clusters">Clusters</a>
                </li>
                <li class="">
                    <a href="/projects">Projects</a>
                </li>
                <li class="">
                    <a href="/mission">Mission</a>
                </li>
                <li class="">
                    <a href="/talks">Talks</a>
                </li>
                <li class="">
                    <a href="/contact">Contact</a>
                </li>
                <li id="top-menu-search">
                    <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fas fa-book"></em>
                <br>
                Blog
            </a>


            <a href="/clusters" class="col-3 col-sm-3 ">
                <em class="fas fa-share-alt"></em>
                <br>
                Clusters
            </a>

            <a href="/projects" class="col-3 col-sm-3 ">
                <em class="fas fa-chart-bar"></em>
                <br>
                Trends
            </a>

            <a href="/contact" class="col-3 col-sm-3 ">
                <em class="fas fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>

    <div class="hidden-md-up text-center" id="top-menu-search-mobile">
        <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
    </div>
</div>

        <div class="mainContent">
            <div class="container-fluid" id="post">
                <h1>New in Coding Standard 4: Long Line Breaks Automated and 3 Legacy Prevention Fixers</h1>

                <ul class="list-inline post-metadata">
    <li class="list-inline-item mr-3">
        <em class="fas fa-clock fa-fw"></em>
        <strong>4 min</strong>
    </li>

    <li class="list-inline-item mr-3">
        <em class="fas fa-calendar fa-fw"></em>
        <time datetime="2018-03-Thu">
            <strike>
                            Thu, Mar 29, 2018
            
            </strike>        </time>
    </li>

            <li class="list-inline-item mr-3 text-success">
            <em class="fas fa-fw fa-sync"></em> Updated Aug, 2020
        </li>
    
            <li class="list-inline-item mr-3">
            <em class="fas fa-fw fa-comments"></em>
            <a href="/blog/2018/03/29/new-in-coding-standard-4-long-line-breaks-automated-and-3-legacy-prevention-fixers/#disqus_thread">X</a> comments
        </li>
    
    
            <li class="list-inline-item mr-3 text-primary">
            <em class="fab fa-fw fa-github"></em>
            <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2018/2018-03-29-new-in-coding-standard-4-long-line-breaks-automated-and-3-legacy-prevention-fixers.md">Edit Post</a>
        </li>
    </ul>

                
                                    <div class="card border-success card-bigger mt-5">
                        <div class="card-header text-white bg-success">
                            <strong>This post was updated at August 2020</strong>
                        </div>
                                                    <div class="card-body">
                                <p>Updated ECS YAML to PHP configuration since <strong>ECS 8</strong>.</p>
                            </div>
                                            </div>

                    <br>
                
                <div class="card card-bigger mb-5">
                    <div class="card-body">
                        <p>Legacy code prevention, lines automated and clear naming of classes in huge projects.
That all is coming to Coding Standard 4 (still in alpha).
<br><br>
Are you curious what work will now these 4 news fixers handle for you? Look inside.</p>
                    </div>
                </div>

                <h2 id="1-let-coding-standard-handle-line-length-for-you">1. Let Coding Standard handle Line Length for You</h2>
<p><a href="https://github.com/symplify/symplify/pull/749" class="btn btn-dark btn-sm mt-2 mb-3">
<em class="fab fa-github"></em>
&nbsp;
Check the PR #749
</a></p>
<p><em>I'm so happy to announce this fixer, because it saved my so many times and also motivates me to use decoupling to smaller, SRP classes.</em></p>
<p>If you use <code>LineLengthSniff</code>, you know it's painful to fix every error report it makes.</p>
<pre><code class="language-php">&lt;?php

// ecs.php

declare(strict_types=1);

use PHP_CodeSniffer\Standards\Generic\Sniffs\Files\LineLengthSniff;
use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;

return static function (ContainerConfigurator $containerConfigurator): void {
    $services = $containerConfigurator-&gt;services();

    $services-&gt;set(LineLengthSniff::class)
        -&gt;property('absoluteLineLimit', 120);
};</code></pre>
<p>The most typical use case is constructor dependencies. You code start small:</p>
<pre><code class="language-php">public function __construct(OneLittleDependency $oneLittleDependency)
{
}</code></pre>
<p>Then it grows...</p>
<pre><code class="language-php">public function __construct(OneLittleDependency $oneLittleDependency, AnotherLittleDependency $anotherLittleDependency)
{
}</code></pre>
<p>...and grows...</p>
<pre><code class="language-php">public function __construct(OneLittleDependency $oneLittleDependency, AnotherLittleDependency $anotherLittleDependency, $someParameter)
{
}</code></pre>
<p>...sniff screams, so you inline it...</p>
<pre><code class="language-php">public function __construct(
    OneLittleDependency $oneLittleDependency,
    AnotherLittleDependency $anotherLittleDependency,
    $someParameter
) {
}</code></pre>
<p>...then you refactor and merge 2 services to 1...</p>
<pre><code class="language-php">public function __construct(
    OneLittleDependency $oneLittleDependency,
    $someParameter
) {
}</code></pre>
<p>...and that is inconsistent and has no reason to be inlined, so you inline it...</p>
<pre><code class="language-php">public function __construct(OneLittleDependency $oneLittleDependency, $someParameter) {
}</code></pre>
<p>...and that is one of many reasons people don't like to decouple classes and keep them small.</p>
<p><br></p>
<p>There are other cases, where parameters, arguments or array items can change up and down:</p>
<pre><code class="language-diff">-$someObject = new SomeClass(
-    $shortArg
-);
+$someObject = new SomeClass($shortArg);</code></pre>
<pre><code class="language-diff">-$someArray = ['superlooongArgumentsover120chars', 'superlooongArgumentsover120chars', 'superlooongArgumentsover120chars'];
+$someArray = [
+    'superlooongArgumentsover120chars',
+    'superlooongArgumentsover120chars',
+    'superlooongArgumentsover120chars'
+];</code></pre>
<p>What if I told you that you'll have to never deal with this manually. Ever!</p>
<p>Welcome <code>LineLengthFixer</code>.</p>
<h3 id="how-to-register-it">How to Register It?</h3>
<pre><code class="language-php">&lt;?php

// ecs.php

declare(strict_types=1);

use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\CodingStandard\Fixer\LineLength\LineLengthFixer;

return static function (ContainerConfigurator $containerConfigurator): void {
    $services = $containerConfigurator-&gt;services();
    $services-&gt;set(LineLengthFixer::class);
};</code></pre>
<p>As you guessed, this fixer works with 120 chars as maximum line-size... by default ↓</p>
<p><br></p>
<h2 id="2-choose-line-length-to-match-your-display">2. Choose Line Length to Match Your Display</h2>
<p><a href="https://github.com/symplify/symplify/pull/747" class="btn btn-dark btn-sm mt-2 mb-3">
<em class="fab fa-github"></em>
&nbsp;
Check the PR #751
</a></p>
<ul>
<li>Do you prefer shorter or longer lines?</li>
<li>Do you want use breaks only and not inline short code?</li>
</ul>
<pre><code class="language-php">&lt;?php

// ecs.php

declare(strict_types=1);

use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\CodingStandard\Fixer\LineLength\LineLengthFixer;

return static function (ContainerConfigurator $containerConfigurator): void {
    $services = $containerConfigurator-&gt;services();

    $services-&gt;set(LineLengthFixer::class)
        -&gt;call('configure', [[
            'max_line_length' =&gt; 100, # default: 120
            'break_long_lines' =&gt; true, # default: true
            'inline_short_lines' =&gt; false, # default: true
        ]]);
};</code></pre>
<p><br></p>
<h2 id="3-make-your-static-classes-visible">3. Make your Static Classes visible</h2>
<p>It started as one simple static method. A helper method. They say: it's ok to use static methods, when you know when to use them. And that's <strong>how cancer started to spread slowly and lethally through Symplify code</strong>.</p>
<p>One day you wake up and from 1 static method is 60 static factories all over your code - Dependency Injection for very poor. And that not the worst. When all code works and is easy to maintain, 1 static method can't hurt it, right?</p>
<p><strong>Well until you need to replace one of nested dependencies that requires few more classes. And then you realized your work is to basically manually maintain dump of dependency injection container</strong> and that you're not coding anymore.</p>
<p>It took weeks to get from this position back to clear dependency injection and I don't want to do it ever again. That's why this PHPStan rule was born.</p>
<h3 id="how-to-register-it">How to Register It?</h3>
<pre><code class="language-yaml">rules:
    - Symplify\CodingStandard\Rules\NoClassWithStaticMethodWithoutStaticNameRule</code></pre>
<p><br></p>
<h2 id="4-prevent-amp-references-with-code-forbiddenstaticfunctionsniff-code">4. Prevent &amp; references with <code>ForbiddenStaticFunctionSniff</code></h2>
<p><a href="https://github.com/symplify/symplify/pull/692" class="btn btn-dark btn-sm mt-2 mb-3">
<em class="fab fa-github"></em>
&nbsp;
Check the PR #692
</a></p>
<p>We all already know that <code>&amp;$references</code> are bad practise, since they increase cyclomatic complexity and hide dependency logic.</p>
<pre><code class="language-php">function someFunction(&amp;$var)
{
    $var + 1;
}</code></pre>
<p>And that we should prefer explicit syntax:</p>
<pre><code class="language-php">function someFunction($var)
{
    return $var + 1;
}</code></pre>
<p>I though I would never meet them again, but they somehow pop-up in PRs. So we made a PHPStan rule for it:</p>
<h3 id="how-to-register-it">How to Register It?</h3>
<pre><code class="language-yaml"># phpstan.neon
rules:
    - Symplify\CodingStandard\Rules\NoReferenceRule</code></pre>
<p><br></p>
<h2 id="5-clear-child-class-naming-once-and-for-all-with-code-classnamesuffixbyparentfixer-code">5. Clear Child Class Naming Once and For All with <code>ClassNameSuffixByParentFixer</code></h2>
<p><a href="https://github.com/symplify/symplify/pull/633" class="btn btn-dark btn-sm mt-2 mb-3">
<em class="fab fa-github"></em>
&nbsp;
Check the PR #633
</a></p>
<p>Often in the code of private companies there are classes like:</p>
<ul>
<li><code>ProductSorter</code></li>
<li><code>ProductSorter</code></li>
<li><code>ProductSorter</code></li>
</ul>
<p>If you use PhpStorm and <em>open file</em> shortcut, you know where I aim.</p>
<p>Now, imagine you want to update the Command that sorts Products by price to Redis database. Inside, it looks like this:</p>
<pre><code class="language-php">final class ProductSorter extends Command
{
    // ...
}</code></pre>
<h3 id="which-one-do-you-open">Which one do you open?</h3>
<p>I could also ask, which one is the interface and which is its implementation, but <a href="https://github.com/symplify/coding-standard#class-should-have-suffix-by-parent-classinterface">there is already checker for that</a>.</p>
<p>Probably each of them manually until you find the right one, which really sucks. That why not only methods names, <strong>but also class names should be as descriptive and as deterministic as possible</strong>. Like this:</p>
<pre><code class="language-diff">-final class ProductSorter extends Command
+final class ProductSorterCommand extends Command
 {
     // ...
 }</code></pre>
<p>And then you have clear class names, that you're able to distinguish without their content:</p>
<ul>
<li><code>ProductSorterCommand</code></li>
<li><code>ProductSorterRepository</code></li>
<li><code>ProductSorterController</code></li>
</ul>
<p>And that's exactly what <code>ClassNameRespectsParentSuffixRule</code> helps you to do.</p>
<h3 id="how-to-register-it">How to Register It?</h3>
<pre><code class="language-yaml"># phpstan.neon
rules:
    - Symplify\CodingStandard\Rules\ClassNameRespectsParentSuffixRule

parameters:
    symplify:
        # it handles many default cases, but allows you to add your own
        forbidden_parent_classes: []</code></pre>
<p><br><br></p>
<p>Happy sniffing and fixing!</p>

                <br>

                <div class="row mb-5 mt-5">
                    <div class="col-12 mb-5">
                                                                            <a href="/blog/2018/03/26/new-in-easy-coding-standard-4-clean-symfony-standard-with-yaml-and-services" class="d-block pt-4 pb-4 pl-4 pr-4 btn btn-success btn-wrappable">
                                <em class="fas fa-fw fa-forward"></em>
                                <strong>Read Next</strong>
                                <br>
                                <span class="text-bigger">
                                    New in Easy Coding Standard 4: Clean Symfony Standard with Yaml and Services
                                </span>
                            </a>
                                            </div>

                    <div class="col-12">
                        <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2018/2018-03-29-new-in-coding-standard-4-long-line-breaks-automated-and-3-legacy-prevention-fixers.md" class="d-block btn btn-dark btn-wrappable">
                            <em class="fab fa-fw fa-github"></em>
                            <strong>Found a typo?</strong> Fix it and join team of 99&nbsp;contributors
                        </a>
                    </div>
                </div>

                <br>

                <a name="comments"></a>
                <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
            </div>

            <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>
        </div>

        <script src="/assets/js/jquery-3.3.1.slim.min.js"></script>
<script src="/assets/js/cluster-checklist.js"></script>
<script src="/assets/js/cluster-expanable.js"></script>

<script src="/assets/js/cleaning-lady-checklist.js"></script>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

<script src="/assets/prism/prism.js"></script>

<script>
    // sortable table
    $('.sortable_table').DataTable({
        // see https://datatables.net/examples/basic_init/filter_only.html
        "searching": false,
        "paging": false,
        "info": false,
        "order": [[1, "desc"]],
        // see https://datatables.net/examples/advanced_init/sort_direction_control.html
        "aoColumns": [
            null,
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] }
        ]
    });
</script>

<div class="text-center mt-5" id="footer">
    <p>
        Thank you <a href="/thank-you">99 people</a>, who contributed this blog

        <span class="pl-2 pr-2">•</span>

        See <a href="/archive">Post Archive</a>
    </p>

    <br>

    <p>
        Did you know my daily focus goes to <strong>turning working with legacy code into joy</strong> again?

        <br>

        Mostly with awesome <a href="https://getrector.org/">instant refactoring tool called Rector</a>.
    </p>
</div>
    </body>
</html>

        <meta property="og:type" content="article" />
    <meta property="og:title" content="New in Coding Standard 4: Long Line Breaks Automated and 3 Legacy Prevention Fixers" />
    <meta property="og:description" content="Legacy code prevention, lines automated and clear naming of classes in huge projects.
That all is coming to Coding Standard 4 (still in alpha).

Are you curious what work will now these 4 news fixers handle for you? Look inside.
" />
    <meta property="og:url" content="/blog/2018/03/29/new-in-coding-standard-4-long-line-breaks-automated-and-3-legacy-prevention-fixers" />

        <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="New in Coding Standard 4: Long Line Breaks Automated and 3 Legacy Prevention Fixers" />
    <meta name="twitter:description" content="Legacy code prevention, lines automated and clear naming of classes in huge projects.
That all is coming to Coding Standard 4 (still in alpha).

Are you curious what work will now these 4 news fixers handle for you? Look inside.
" />
