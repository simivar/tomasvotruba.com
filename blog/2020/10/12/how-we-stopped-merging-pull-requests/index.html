<!DOCTYPE html>
<html lang="en">
    <head>
    <title>How We Stopped Merging Pull Requests | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    
    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css" integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/brands.css" integrity="sha384-nT8r1Kzllf71iZl81CdFzObMsaLOhqBU1JD2+XoAALbdtWaXDOlWOZTR4v1ktjPE" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css" integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">

        <link href="/assets/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />

        <link href="/assets/css/style.css" rel="stylesheet" type="text/css" />


        <link href="/assets/css/checklist.css" rel="stylesheet" type="text/css" />
</head>
    <body>
                <!-- post_id: 282 -->

        
<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    <img src="https://avatars1.githubusercontent.com/u/924196?s=60&v=4" class="me_avatar">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li class="">
                    <a href="/php-framework-trends">Trends</a>
                </li>
                <li class="">
                    <a href="/clusters">Clusters</a>
                </li>
                <li class="">
                    <a href="/projects">Projects</a>
                </li>
                <li class="">
                    <a href="/mission">Mission</a>
                </li>
                <li class="">
                    <a href="/talks">Talks</a>
                </li>
                <li class="">
                    <a href="/contact">Contact</a>
                </li>
                <li id="top-menu-search">
                    <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fas fa-book"></em>
                <br>
                Blog
            </a>


            <a href="/clusters" class="col-3 col-sm-3 ">
                <em class="fas fa-share-alt"></em>
                <br>
                Clusters
            </a>

            <a href="/projects" class="col-3 col-sm-3 ">
                <em class="fas fa-chart-bar"></em>
                <br>
                Trends
            </a>

            <a href="/contact" class="col-3 col-sm-3 ">
                <em class="fas fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>

    <div class="hidden-md-up text-center" id="top-menu-search-mobile">
        <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
    </div>
</div>

        <div class="mainContent">
            <div class="container-fluid" id="post">
                <h1>How We Stopped Merging Pull&nbsp;Requests</h1>

                <ul class="list-inline post-metadata">
    <li class="list-inline-item mr-3">
        <em class="fas fa-clock fa-fw"></em>
        <strong>2 min</strong>
    </li>

    <li class="list-inline-item mr-3">
        <em class="fas fa-calendar fa-fw"></em>
        <time datetime="2020-10-Mon">
            
                            Mon, Oct 12
            
            </strike>        </time>
    </li>

    
            <li class="list-inline-item mr-3">
            <em class="fas fa-fw fa-comments"></em>
            <a href="/blog/2020/10/12/how-we-stopped-merging-pull-requests/#disqus_thread">X</a> comments
        </li>
    
    
            <li class="list-inline-item mr-3 text-primary">
            <em class="fab fa-fw fa-github"></em>
            <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2020/2020-10-12-how-we-stopped-merging-pull-requests.md">Edit Post</a>
        </li>
    </ul>

                
                
                <div class="card card-bigger mb-5">
                    <div class="card-body">
                        <p>What comes before merging a pull request? Code-review, feedback from developers, and fixes to make the reviewer happy. After that, we only need the tests, coding standard, PHPStan, and Rector to pass in the CI.
<br><br>
Here is an idea - <strong>don't merge any pull-request from now on</strong>...</p>
                    </div>
                </div>

                <p>...and let them opened for ages... no, just kidding.</p>
<h2 id="don-t-forget-to-merge">Don't forget to Merge</h2>
<p>But if you already accepted the pull-request, the issues are resolved, <strong>you still have to wait for CI to finish with green</strong>. If you're lucky, it's under 3 minutes, if you're open source 5-8 minutes and with private project 5-30 minutes.</p>
<p>How to kill the waiting time? Go for a coffee, toilet break, or a social leak (Facebook, Twitter, or your favorite PHP blog), get back, see the green checkbox, and click on the merge button. <strong>Or even worse</strong> - you jump to another issue, <a href="/blog/2018/08/27/why-and-how-to-avoid-the-memory-lock/">remember to merge</a>, then switch your focus back and forth...</p>
<img src="/assets/images/posts/2020/kodiak/kodiak_focus.png" alt="" class="img-thumbnail mt-5">
<p><a href="/blog/2020/01/13/why-is-first-instant-feedback-crucial-to-developers/">The instant feedback</a> is killed, and so is the flow.</p>
<blockquote class="blockquote text-center mt-5 mb-5">
<p>&quot;<strong>Can you automate</strong> responsibility developers have to think about?
<br>
Please do it!
<br>
They will be able to focus more and produce better quality code.&quot;</p>
</blockquote>
<p><br></p>
<h2 id="wait-for-240-pull-requests-a-month-no-thanks">Wait for 240 pull-requests a Month? No, Thanks!</h2>
<p>In <a href="https://github.com/rectorphp/rector/pulse/monthly">Rector</a>, <a href="https://github.com/symplify/symplify/pulse/monthly">Symplify</a> and <a href="https://github.com/migrify/migrify/pulse/monthly">Migrify</a> <a href="/clusters/#monorepo-from-zero-to-hero">mono-repositories</a> we had 240 merge-request for just last month.</p>
<p>That's <strong>240 distractions with ~5 minutes upkeep</strong> = 20 hours wasted by brain-waiting and much more work ruined.</p>
<h2 id="delegate-and-automate-merge-request">Delegate and Automate Merge Request</h2>
<p>What if I told you just a few percent of these manually? The rest is done by <a href="https://github.com/marketplace/kodiakhq">Kodiak</a>. That's not my full-time on-demand coworker, but Github Application that <strong>handles automated merging</strong>.</p>
<p>How does <em>Kodiak</em> work? You mark the pull-request with the &quot;automerge&quot; tag, then - if CI passes - the pull-request is merged. So instead of waiting 240 times for CI feedback, you'll <strong>add the tag when you finish the review</strong>. Then the pull-request is closed, and you can focus on the next work in the peace.</p>
<h2 id="4-steps-to-setup-kodiak">4 Steps to Setup Kodiak</h2>
<h3 id="1-go-to-setting-of-your-github-repository">1. Go to Setting of your GitHub Repository</h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_branches_1.png" alt="" class="img-thumbnail mt-3">
<h3 id="2-add-branch-checks-for-code-master-code">2. Add Branch Checks for <code>master</code></h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_branches_2.png" alt="" class="img-thumbnail mt-3">
<h3 id="3-select-jobs-that-are-required-to-pass">3. Select Jobs that are Required to Pass</h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_require.png" alt="" class="img-thumbnail mt-3">
<h3 id="4-enable-kodiak">4. Enable Kodiak</h3>
<p>Go to <a href="https://github.com/marketplace/kodiakhq">marketplace</a> and enable it.</p>
<h3 id="5-add-code-kodiak-toml-code-setup-to-the-repository-code">5. Add <code>.kodiak.toml</code> Setup To the Repository code</h3>
<pre><code class="language-yaml"># .kodiak.toml
version = 1

# this saves deleting merged branches manually
merge.delete_branch_on_merge = true</code></pre>
<p><br></p>
<p>Now Kodiak is enabled and waiting for your work!</p>
<h2 id="1-step-to-automerge-pull-request-with-kodiak">1 Step to Automerge Pull-Request with Kodiak</h2>
<h3 id="1-after-you-decide-the-pr-is-ready-add-the-quot-automerge-quot-tag">1. After You Decide the PR is Ready, add the &quot;automerge&quot; tag</h3>
<img src="/assets/images/posts/2020/kodiak/koidak_tag.png" alt="" class="img-thumbnail mt-3">
<p>Then you're finished. The Kodiak will handle the rest...</p>
<p><br></p>
<p>Kodiak waits for the CI to pass...</p>
<img src="/assets/images/posts/2020/kodiak/kodiak_waiting.png" alt="" class="img-thumbnail mt-3">
<p>...then merges and deletes branch:</p>
<img src="/assets/images/posts/2020/kodiak/kodiak_merge.png" alt="" class="img-thumbnail mt-3">
<p><br></p>
<p>Now you've one less to think about for the rest of your life.</p>
<p><br></p>
<p>Happy coding!</p>

                <br>

                <div class="row mb-5 mt-5">
                    <div class="col-12 mb-5">
                                                                            <a href="/blog/2020/10/05/how-to-reveal-static-call-relationships-in-your-code" class="d-block pt-4 pb-4 pl-4 pr-4 btn btn-success btn-wrappable">
                                <em class="fas fa-fw fa-forward"></em>
                                <strong>Read Next</strong>
                                <br>
                                <span class="text-bigger">
                                    How to Reveal Static Call Relationships in Your Code
                                </span>
                            </a>
                                            </div>

                    <div class="col-12">
                        <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/master/packages/blog/config/data/2020/2020-10-12-how-we-stopped-merging-pull-requests.md" class="d-block btn btn-dark btn-wrappable">
                            <em class="fab fa-fw fa-github"></em>
                            <strong>Found a typo?</strong> Fix it and join team of 99&nbsp;contributors
                        </a>
                    </div>
                </div>

                <br>

                <a name="comments"></a>
                <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
            </div>

            <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>
        </div>

        <script src="/assets/js/jquery-3.3.1.slim.min.js"></script>
<script src="/assets/js/cluster-checklist.js"></script>
<script src="/assets/js/cluster-expanable.js"></script>

<script src="/assets/js/cleaning-lady-checklist.js"></script>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

<script src="/assets/prism/prism.js"></script>

<script>
    // sortable table
    $('.sortable_table').DataTable({
        // see https://datatables.net/examples/basic_init/filter_only.html
        "searching": false,
        "paging": false,
        "info": false,
        "order": [[1, "desc"]],
        // see https://datatables.net/examples/advanced_init/sort_direction_control.html
        "aoColumns": [
            null,
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] }
        ]
    });
</script>

<div class="text-center mt-5" id="footer">
    <p>
        Thank you <a href="/thank-you">99 people</a>, who contributed this blog

        <span class="pl-2 pr-2">•</span>

        See <a href="/archive">Post Archive</a>
    </p>

    <br>

    <p>
        Did you know my daily focus goes to <strong>turning working with legacy code into joy</strong> again?

        <br>

        Mostly with awesome <a href="https://getrector.org/">instant refactoring tool called Rector</a>.
    </p>
</div>
    </body>
</html>

        <meta property="og:type" content="article" />
    <meta property="og:title" content="How We Stopped Merging Pull Requests" />
    <meta property="og:description" content="What comes before merging a pull request? Code-review, feedback from developers, and fixes to make the reviewer happy. After that, we only need the tests, coding standard, PHPStan, and Rector to pass in the CI.

Here is an idea - **don&#039;t merge any pull-request from now on**...
" />
    <meta property="og:url" content="/blog/2020/10/12/how-we-stopped-merging-pull-requests" />

        <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="How We Stopped Merging Pull Requests" />
    <meta name="twitter:description" content="What comes before merging a pull request? Code-review, feedback from developers, and fixes to make the reviewer happy. After that, we only need the tests, coding standard, PHPStan, and Rector to pass in the CI.

Here is an idea - **don&#039;t merge any pull-request from now on**...
" />
